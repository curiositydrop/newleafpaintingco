<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Experience | New Leaf Painting Co.</title>
  <meta name="description" content="A fun, interactive portal into the New Leaf Painting experience. Before & after reveals, pro tips, and a different kind of painting company." />

  <style>
    :root{
      --bg:#000;
      --panel: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);

      /* Your green */
      --green:#1f6b33;

      /* Glow accent (used in your other pages) */
      --glow: rgba(80,255,160,.28);

      /* Optional vibe accent that can shift */
      --accent: rgba(80,255,160,.55);
    }

    *{ box-sizing: border-box; }
    html,body{ margin:0; padding:0; background:var(--bg); color:var(--text); overflow-x:hidden; }
    a{ color: inherit; text-decoration:none; }

    /* ===== Ambient portal background ===== */
    .portal-bg{
      position: fixed;
      inset: 0;
      z-index: -2;
      background:
        radial-gradient(900px 420px at 50% 0%, rgba(80,255,160,.14), transparent 60%),
        radial-gradient(700px 420px at 15% 30%, rgba(31,107,51,.16), transparent 65%),
        radial-gradient(700px 420px at 85% 35%, rgba(80,255,160,.10), transparent 60%),
        #000;
      filter: saturate(1.08);
    }
    .grain{
      position: fixed;
      inset:0;
      z-index:-1;
      pointer-events:none;
      opacity:.09;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
    }

    /* ===== Layout ===== */
    .wrap{
      max-width: 1040px;
      margin: 0 auto;
      padding: 18px 14px 70px;
    }

    /* ===== Top bar (minimal portal nav) ===== */
    .topbar{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 12px;
      padding: 10px 0 16px;
    }

    .leaf-brand{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }

    .leaf-logo{
      width: 54px;
      height: 54px;
      border-radius: 14px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 0 22px rgba(80,255,160,.18);
      display:grid;
      place-items:center;
      overflow:hidden;
    }
    .leaf-logo img{
      width: 92%;
      height: 92%;
      object-fit: contain;
      display:block;
      filter: drop-shadow(0 0 12px rgba(80,255,160,.25));
    }

    .leaf-title{
      display:flex;
      flex-direction:column;
      line-height:1.15;
      min-width:0;
    }
    .leaf-title strong{
      font-size: 14px;
      letter-spacing: .2px;
      color: rgba(255,255,255,.92);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .leaf-title span{
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .top-actions{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap: wrap;
      justify-content:flex-end;
    }

    /* ===== Buttons (match your vibe) ===== */
    .nl-btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      font-weight: 900;
      letter-spacing: .2px;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease, background .12s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .nl-btn:hover{ transform: translateY(-1px); filter: brightness(1.06); background: rgba(255,255,255,.09); }

    .nl-btn.primary{
      border-color: rgba(80,255,160,.28);
      background: linear-gradient(180deg, rgba(31,107,51,.40), rgba(31,107,51,.18));
      box-shadow: 0 0 22px rgba(80,255,160,.16);
    }

    .nl-btn.ghost{
      background: transparent;
      border-color: rgba(255,255,255,.18);
    }

    /* ===== Portal hero ===== */
    .hero{
      margin-top: 6px;
      padding: 18px 16px 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow:
        0 18px 50px rgba(0,0,0,.55),
        0 0 34px rgba(80,255,160,.12);
      overflow:hidden;
      position:relative;
    }

    .hero::before{
      content:"";
      position:absolute;
      inset:-60px -40px auto -40px;
      height: 220px;
      background: radial-gradient(closest-side, rgba(80,255,160,.20), transparent 70%);
      filter: blur(10px);
      opacity:.85;
    }

    .hero h1{
      margin: 0 0 8px;
      font-size: clamp(1.5rem, 3.2vw, 2.2rem);
      letter-spacing: .3px;
      color: rgba(80,255,160,.95);
      text-shadow: 0 0 14px rgba(80,255,160,.18);
      position:relative;
    }
    .hero p{
      margin: 0;
      max-width: 820px;
      color: rgba(255,255,255,.82);
      line-height: 1.5;
      position:relative;
    }

    .type-line{
      margin-top: 10px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: rgba(255,255,255,.80);
      font-size: 13px;
      background: rgba(0,0,0,.38);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 12px;
      padding: 10px 12px;
      position:relative;
    }
    .cursor{
      display:inline-block;
      width: 10px;
      height: 16px;
      transform: translateY(2px);
      background: rgba(80,255,160,.9);
      margin-left: 3px;
      animation: blink .9s steps(1) infinite;
      border-radius: 2px;
    }
    @keyframes blink{ 50%{ opacity:0; } }

    /* ===== Sections ===== */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 14px;
      margin-top: 14px;
    }
    @media (max-width: 920px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 12px 28px rgba(0,0,0,.45);
    }
    .card h2{
      margin: 0 0 10px;
      color: rgba(80,255,160,.92);
      letter-spacing: .2px;
      font-size: 1.15rem;
    }
    .card p{
      margin: 0 0 10px;
      color: rgba(255,255,255,.78);
      line-height: 1.5;
    }

    /* ===== Before/After slider ===== */
    .ba-slider{
      position: relative;
      width: 100%;
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      box-shadow: 0 0 28px rgba(80,255,160,.10);
      user-select:none;
      touch-action: pan-y;
    }
    .ba-slider img{
      width:100%;
      height: 360px;
      object-fit: cover;
      display:block;
    }
    .ba-before{
      position:absolute;
      top:0; left:0;
      height:100%;
      width:50%;
      overflow:hidden;
    }
    .ba-handle{
      position:absolute;
      top:0;
      left:50%;
      transform: translateX(-50%);
      height:100%;
      width: 44px;
      pointer-events:none;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .ba-handle::before{
      content:"";
      position:absolute;
      height:100%;
      width:4px;
      background: rgba(255,255,255,.92);
      border-radius: 4px;
    }
    .knob{
      position:relative;
      width: 40px; height: 40px;
      border-radius: 999px;
      background: rgba(31,107,51,.92);
      border: 2px solid rgba(255,255,255,.9);
      display:grid;
      place-items:center;
      box-shadow: 0 10px 22px rgba(0,0,0,.35), 0 0 18px rgba(80,255,160,.30);
      color:#fff;
      font-weight: 900;
    }
    .ba-label{
      position:absolute;
      top: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.18);
      color:#fff;
      font-size: 12px;
      font-weight: 900;
      letter-spacing: .5px;
      backdrop-filter: blur(8px);
    }
    .ba-label.before{ left: 12px; }
    .ba-label.after{ right: 12px; }
    .hint{
      margin-top: 10px;
      color: rgba(255,255,255,.70);
      font-size: 13px;
      text-align:center;
    }

    /* ===== Vibe picker ===== */
    .vibes{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .vibe{
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      cursor:pointer;
      font-weight: 900;
      color: rgba(255,255,255,.88);
      transition: transform .12s ease, filter .12s ease;
      user-select:none;
    }
    .vibe:hover{ transform: translateY(-1px); filter: brightness(1.06); }
    .vibe small{ display:block; font-weight:700; color: rgba(255,255,255,.62); margin-top: 4px; }

    /* ===== Scratch reveal ===== */
    .scratch-wrap{
      display:grid;
      gap: 10px;
      margin-top: 10px;
    }
    .scratch-box{
      position: relative;
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(10,10,10,.85);
      box-shadow: 0 0 22px rgba(80,255,160,.10);
    }
    .scratch-under{
      padding: 16px;
      min-height: 120px;
    }
    .scratch-under h3{
      margin: 0 0 8px;
      color: rgba(80,255,160,.92);
      letter-spacing: .2px;
    }
    .scratch-under p{ margin:0; color: rgba(255,255,255,.82); line-height: 1.45; }
    canvas#scratchCanvas{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      display:block;
    }

    /* ===== Popup form ===== */
    .popup{
      display:none;
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: rgba(0,0,0,.72);
      justify-content:center;
      align-items:center;
      padding: 18px 12px;
    }
    .popup-content{
      width: 100%;
      max-width: 440px;
      border-radius: 16px;
      background: rgba(10,10,10,.96);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow:
        0 26px 70px rgba(0,0,0,.70),
        0 0 30px rgba(80,255,160,.12);
      padding: 18px 16px 16px;
      position: relative;
      color: var(--text);
    }
    .popup-content h2{
      margin: 4px 0 12px;
      text-align:center;
      font-size: 1.15rem;
      color: rgba(80,255,160,.95);
    }
    .popup-content .close{
      position:absolute;
      top: 8px;
      right: 10px;
      border:none;
      background: transparent;
      color:#fff;
      font-size: 34px;
      font-weight: 900;
      cursor:pointer;
      line-height:1;
    }
    .field{ margin: 10px 0; }
    label{
      display:block;
      margin: 0 0 6px;
      font-weight: 900;
      color: rgba(255,255,255,.82);
      font-size: .92rem;
    }
    input, textarea{
      width: 100%;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: #fff;
      padding: 10px 12px;
      outline: none;
    }
    textarea{ resize: vertical; }
    #estimate-send{
      width:100%;
      margin-top: 12px;
      border-radius: 12px;
      border: 2px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.92);
      color: #0f5f33;
      padding: 12px 14px;
      font-weight: 900;
      cursor: pointer;
    }
    #estimate-send:hover{ filter: brightness(1.03); }

    /* ===== Footer-ish ===== */
    .portal-footer{
      margin-top: 18px;
      text-align:center;
      color: rgba(255,255,255,.65);
      font-size: 12px;
      padding-top: 14px;
    }
  </style>
</head>

<body>
  <div class="portal-bg"></div>
  <div class="grain"></div>

  <div class="wrap">

    <!-- Minimal portal top bar -->
    <div class="topbar">
      <div class="leaf-brand">
        <div class="leaf-logo">
          <!-- Replace with your leaf mascot file -->
          <img src="LEAF_MASCOT.png" alt="New Leaf Mascot">
        </div>
        <div class="leaf-title">
          <strong>New Leaf Painting Co.</strong>
          <span>The Experience Portal</span>
        </div>
      </div>

      <div class="top-actions">
        <a class="nl-btn ghost" href="index.html">Home</a>
        <a class="nl-btn" href="past-projects.html">Past Projects</a>
        <a class="nl-btn primary" href="#" data-contact-open="1">Get Free Estimate</a>
      </div>
    </div>

    <!-- Portal hero -->
    <section class="hero">
      <h1>Welcome to The Experience</h1>
      <p>
        This isn’t a boring painting website. It’s a preview of what it feels like when your home gets a *new leaf* —
        cleaner lines, brighter rooms, and work done the right way.
      </p>

      <div class="type-line" aria-label="Portal message">
        <span id="typeText"></span><span class="cursor"></span>
      </div>
    </section>

    <div class="grid">

      <!-- Left: before/after slider -->
      <section class="card">
        <h2>Slide to Reveal</h2>
        <p>Drag the handle. One tiny movement = instant “okay wow” energy.</p>

        <div class="ba-slider" id="ba1" aria-label="Before and after slider">
          <!-- Use your own images (these are placeholders) -->
          <img class="after" src="experience-after.jpg" alt="After photo (replace)" />
          <div class="ba-before">
            <img class="before" src="experience-before.jpg" alt="Before photo (replace)" />
          </div>

          <div class="ba-label before">BEFORE</div>
          <div class="ba-label after">AFTER</div>
          <div class="ba-handle"><div class="knob">⇆</div></div>
        </div>

        <div class="hint">Tip: This is the exact “before → after” feeling clients get.</div>
      </section>

      <!-- Right: vibe + scratch -->
      <section class="card">
        <h2>Pick a Vibe</h2>
        <p>Choose a mood. The portal shifts — still New Leaf, but a different atmosphere.</p>

        <div class="vibes" aria-label="Vibe options">
          <div class="vibe" data-accent="rgba(80,255,160,.55)">Fresh Mint <small>clean + bright</small></div>
          <div class="vibe" data-accent="rgba(120,200,255,.45)">Cool Modern <small>sharp + sleek</small></div>
          <div class="vibe" data-accent="rgba(255,180,90,.38)">Warm Cozy <small>inviting + soft</small></div>
          <div class="vibe" data-accent="rgba(220,120,255,.38)">Night Luxe <small>premium + bold</small></div>
        </div>

        <div class="scratch-wrap">
          <h2 style="margin-top:14px;">Scratch Reveal</h2>
          <p style="margin-bottom:0;">Scratch the card. You’ll uncover a pro tip (or a hidden perk).</p>

          <div class="scratch-box">
            <div class="scratch-under">
              <h3 id="revealTitle">Hidden Upgrade</h3>
              <p id="revealText">“The cleanest paint jobs aren’t about paint — they’re about prep.”<br><br>
                Want this level of finish? Hit <b>Get Free Estimate</b> and tell us what you're painting.</p>
            </div>
            <canvas id="scratchCanvas"></canvas>
          </div>

          <button class="nl-btn" id="newReveal">Give me another reveal</button>
        </div>
      </section>

    </div>

    <!-- Little dopamine section -->
    <section class="card" style="margin-top:14px;">
      <h2>One More Button</h2>
      <p>Because every great experience needs a little surprise. Tap it.</p>
      <button class="nl-btn primary" id="spinWisdom">Drop a Paint Wisdom</button>
      <p id="wisdomOut" style="margin-top:10px; color: rgba(255,255,255,.85); font-weight:800;"></p>
    </section>

    <div class="portal-footer">
      Powered by New Leaf Painting Co. • Southern Maine • “Different on purpose.”
    </div>

  </div>

  <!-- Estimate Popup (standalone for this page) -->
  <div id="contact-popup" class="popup" aria-modal="true" role="dialog" aria-label="Get free estimate popup">
    <div class="popup-content">
      <button type="button" class="close" aria-label="Close">&times;</button>
      <h2>Get free estimate</h2>

      <form id="estimate-form" novalidate>
        <div class="field">
          <label for="name">Name</label>
          <input type="text" id="name" name="name" placeholder="Your name">
        </div>

        <div class="field">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" placeholder="you@email.com">
        </div>

        <div class="field">
          <label for="phone">Phone</label>
          <input type="tel" id="phone" name="phone" placeholder="(207) 555-1234">
        </div>

        <div class="field">
          <label for="message">Message</label>
          <textarea id="message" name="message" rows="4" placeholder="Tell me what you’re looking to paint…"></textarea>
        </div>

        <button id="estimate-send" type="button">Send</button>
      </form>
    </div>
  </div>

  <script>
    // ===== 1) Portal typing line =====
    (function(){
      const lines = [
        "Portal scan complete… ✅",
        "You have entered: The New Leaf Experience.",
        "Drag. Scratch. Explore. (No boring menus here.)",
        "If you ever need painting — you’ll remember this."
      ];
      const el = document.getElementById("typeText");
      let i=0, j=0, current="", deleting=false;

      function tick(){
        const target = lines[i];
        if(!deleting){
          current = target.slice(0, j++);
          el.textContent = current;
          if(j > target.length + 10){ deleting = true; }
        } else {
          current = target.slice(0, j--);
          el.textContent = current;
          if(j <= 0){
            deleting=false;
            i = (i+1) % lines.length;
            j = 0;
          }
        }
        setTimeout(tick, deleting ? 22 : 34);
      }
      tick();
    })();

    // ===== 2) Before/After slider =====
    function initBASlider(slider){
      const beforeWrap = slider.querySelector(".ba-before");
      const handle = slider.querySelector(".ba-handle");
      let dragging = false;

      const setPos = (clientX) => {
        const rect = slider.getBoundingClientRect();
        const x = Math.min(Math.max(clientX - rect.left, 0), rect.width);
        const pct = (x / rect.width) * 100;
        beforeWrap.style.width = pct + "%";
        handle.style.left = pct + "%";
      };

      slider.addEventListener("mousedown", (e)=>{ dragging=true; setPos(e.clientX); });
      window.addEventListener("mousemove", (e)=>{ if(!dragging) return; setPos(e.clientX); });
      window.addEventListener("mouseup", ()=> dragging=false);

      slider.addEventListener("touchstart", (e)=>{ dragging=true; setPos(e.touches[0].clientX); }, {passive:true});
      slider.addEventListener("touchmove", (e)=>{ if(!dragging) return; setPos(e.touches[0].clientX); }, {passive:true});
      slider.addEventListener("touchend", ()=> dragging=false);

      requestAnimationFrame(()=>{
        const rect = slider.getBoundingClientRect();
        setPos(rect.left + rect.width/2);
      });
    }
    initBASlider(document.getElementById("ba1"));

    // ===== 3) Vibe picker (changes accent used in background glow) =====
    document.querySelectorAll(".vibe").forEach(v=>{
      v.addEventListener("click", ()=>{
        const accent = v.getAttribute("data-accent");
        document.documentElement.style.setProperty("--accent", accent);

        // Slightly shift the portal background intensity using accent
        document.querySelector(".portal-bg").style.background =
          `radial-gradient(900px 420px at 50% 0%, ${accent.replace(")", ",.22)")}, transparent 60%),
           radial-gradient(700px 420px at 15% 30%, rgba(31,107,51,.16), transparent 65%),
           radial-gradient(700px 420px at 85% 35%, ${accent.replace(")", ",.14)")}, transparent 60%),
           #000`;
      });
    });

    // ===== 4) Scratch reveal =====
    const reveals = [
      { t:"Hidden Upgrade", b:"“The cleanest paint jobs aren’t about paint — they’re about prep.”\n\nIf you want crisp lines and zero mess, we’ve got you." },
      { t:"Pro Tip", b:"Two coats is standard. The difference is *how* it’s applied — and what happens *before* paint touches the wall." },
      { t:"The Secret", b:"Most “cheap” paint jobs cost more later.\n\nFixing cut corners is always more expensive than doing it right once." },
      { t:"Tiny Perk", b:"Mention “EXPERIENCE” in your estimate message.\nIf we’re a fit, I’ll build the quote with a little extra love." }
    ];

    const canvas = document.getElementById("scratchCanvas");
    const box = canvas.parentElement;
    const ctx = canvas.getContext("2d");

    function sizeCanvas(){
      const r = box.getBoundingClientRect();
      canvas.width = Math.floor(r.width * devicePixelRatio);
      canvas.height = Math.floor(r.height * devicePixelRatio);
      canvas.style.width = r.width + "px";
      canvas.style.height = r.height + "px";
      ctx.scale(devicePixelRatio, devicePixelRatio);
    }

    function resetScratch(){
      // Resize fresh (prevents weird iOS scaling)
      canvas.width = 0; canvas.height = 0;
      sizeCanvas();

      const w = box.getBoundingClientRect().width;
      const h = box.getBoundingClientRect().height;

      // overlay "scratch layer"
      ctx.setTransform(1,0,0,1,0,0);
      ctx.fillStyle = "rgba(255,255,255,.10)";
      ctx.fillRect(0,0,w,h);

      // subtle diagonal sheen
      const g = ctx.createLinearGradient(0,0,w,h);
      g.addColorStop(0, "rgba(255,255,255,.10)");
      g.addColorStop(.5,"rgba(80,255,160,.18)");
      g.addColorStop(1, "rgba(255,255,255,.10)");
      ctx.fillStyle = g;
      ctx.fillRect(0,0,w,h);

      // text on top layer
      ctx.fillStyle = "rgba(255,255,255,.85)";
      ctx.font = "900 18px system-ui, -apple-system, Segoe UI, Roboto, Arial";
      ctx.fillText("Scratch here to reveal", 16, 34);

      ctx.globalCompositeOperation = "source-over";
    }

    function setReveal(){
      const pick = reveals[Math.floor(Math.random()*reveals.length)];
      document.getElementById("revealTitle").textContent = pick.t;
      document.getElementById("revealText").textContent = pick.b;
      resetScratch();
    }

    let scratching = false;
    function scratchAt(x,y){
      const rect = canvas.getBoundingClientRect();
      const cx = x - rect.left;
      const cy = y - rect.top;

      ctx.globalCompositeOperation = "destination-out";
      ctx.beginPath();
      ctx.arc(cx, cy, 18, 0, Math.PI*2);
      ctx.fill();
    }

    canvas.addEventListener("mousedown", (e)=>{ scratching=true; scratchAt(e.clientX, e.clientY); });
    window.addEventListener("mouseup", ()=> scratching=false);
    canvas.addEventListener("mousemove", (e)=>{ if(!scratching) return; scratchAt(e.clientX, e.clientY); });

    canvas.addEventListener("touchstart", (e)=>{ scratching=true; scratchAt(e.touches[0].clientX, e.touches[0].clientY); }, {passive:true});
    canvas.addEventListener("touchmove", (e)=>{ if(!scratching) return; scratchAt(e.touches[0].clientX, e.touches[0].clientY); }, {passive:true});
    canvas.addEventListener("touchend", ()=> scratching=false);

    document.getElementById("newReveal").addEventListener("click", setReveal);
    window.addEventListener("resize", resetScratch);
    setReveal();

    // ===== 5) "Paint Wisdom" button =====
    const wisdom = [
      "Cut lines don’t have to be perfect — they have to be *clean*.",
      "A great paint job is a cleaning job, then a prep job, then paint.",
      "If the trim looks sharp, the whole room looks expensive.",
      "Speed is fine — rushing is not.",
      "You can’t hide bad prep with good paint."
    ];
    document.getElementById("spinWisdom").addEventListener("click", ()=>{
      const out = document.getElementById("wisdomOut");
      out.textContent = wisdom[Math.floor(Math.random()*wisdom.length)];
    });

    // ===== Popup wiring (portal page only) =====
    const popup = document.getElementById("contact-popup");
    const openers = document.querySelectorAll('[data-contact-open="1"]');
    const closeBtn = popup.querySelector(".close");

    const openPopup = (e) => { if(e) e.preventDefault(); popup.style.display="flex"; };
    const closePopup = () => popup.style.display="none";

    openers.forEach(o => o.addEventListener("click", openPopup));
    closeBtn.addEventListener("click", closePopup);

    window.addEventListener("click", (e)=>{ if(e.target === popup) closePopup(); });
    window.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closePopup(); });

    // ===== Send button wiring (mailto with their info) =====
    const sendBtn = document.getElementById("estimate-send");
    sendBtn.addEventListener("click", ()=>{
      const name = (document.getElementById("name").value || "").trim();
      const email = (document.getElementById("email").value || "").trim();
      const phone = (document.getElementById("phone").value || "").trim();
      const message = (document.getElementById("message").value || "").trim();

      if (!name || (!email && !phone)) {
        alert("Please enter your name and either an email or phone number.");
        return;
      }

      const to = "newleafpaintingcompany@gmail.com";
      const subject = encodeURIComponent(`Estimate Request - ${name}${phone ? " - " + phone : ""}`);

      const body = encodeURIComponent(
`Hi Mike,

I'd like a free estimate. Here’s my info:

Name: ${name}
Email: ${email || "(not provided)"}
Phone: ${phone || "(not provided)"}

Message:
${message || "(no message)"}

Thanks!`
      );

      window.location.href = `mailto:${to}?subject=${subject}&body=${body}`;
      closePopup();
    });
  </script>
</body>
</html>
